## 项目意义
测试LLM的性能，获得反馈。
提供问答服务，促进学习进步。
提高群活跃度。

## 环境
使用的conda环境: `bot`
https://zhuanlan.zhihu.com/p/73675447
pipx 是个虚拟环境，其实我们不需要。
pipx的目的是为了让python编的命令可以在命令行直接使用，这个设计的和conda不一样。（但是conda也可以做到啊，而且还不局限于python）
pipx的设计哲学，每一个pypi包认为是一个application，独立安装（当然包括它依赖的东西），然后在命令行可以直接使用。这样pypi就变成了App Store。

## go-cqhttp
什么是正向与反向WebSocket？
https://docs.go-cqhttp.org/reference/
正向就是Nonebot去连接go-cqhttp，反向就是go-cqhttp去连接Nonebot。

## Lagrange.OneBot
https://github.com/LagrangeDev/Lagrange.Core/releases


## 为什么选择Nonebot2而不是AliceBot？
共同的优点：
- 开源、Python
- Pyright提供Type Hint
- asyncio
AliceBot优点：
- 渐进式。相比之下Nonebot2太复杂了，一堆奇怪的概念。
Nonebot2优点：
- 有商店
## Nonebot2
### 几个基本概念：适配器、驱动器

驱动器（Driver）: Nonebot的后端，负责连接目标聊天软件\服务器\平台。

适配器（Adapter）: Nonebot的消息格式转换。把从驱动器收到的消息转换为Nonebot内部的消息格式，然后再把Nonebot内部的消息格式转换为驱动器所需的消息格式。
比如支持OneBot，然后我们还需要OneBot的实现后端。也可以跳过OneBot直接连接那个后端。

配置文件：使用 pydantic 以及 python-dotenv，复杂类型数据需使用 JSON 格式填写。
pydantic：data validation library
python-dotenv：读取.env文件。很局限，只能读取字符串，不能读取其他类型。

## Helpful QQ群 Assistant 的 Prompt 设计

### 字数限制
防止群里面信息量爆炸。
或者超过多少字符使用引用回答。

### 自主决定是否要回答
基本原则：如果是有人直接提问，那么直接回答；如果是有人在群里面讨论，那么自主决定是否应该介入提供有价值的信息或者提供趣味。

什么时候触发决策?
每一次有感兴趣群聊有新消息时，都要触发一次决策，根据历史的n个消息（或者tokens数量限制下可以引入的所有消息）。
当然首先要触发存储功能。
- 需要一个向量数据库。
- 群友的见解是有价值的，必要时作为知识库查询。
- 注意隐私保护问题，仅用于学习用途，并且不能全都保存，并且避免监听敏感信息。


决定的依据如下：
机器人目的是什么？回答的动机是什么？如何评估回答的动机？
- 为了给群的人在需要的时候提供信息与帮助。


### 自主决定是否要自我介绍


### 当遇到不会回答的问题时，询问创造者

创造者和机器人的对话，被机器人保存，作为知识库查询。


### Toolformer架构，要求自己决定调用工具

### 检索增强工具
https://zhuanlan.zhihu.com/p/671371646

## 故事背景与自我人格设定的Prompt 设计

### “我是威震天，不是惊破天！” —— Cosplay 《变形金刚4》被人类改造为惊破天的威震天


### “智能科学不存在了” —— Cosplay 《三体》智子
https://zh.moegirl.org.cn/%E6%99%BA%E5%AD%90(%E4%B8%89%E4%BD%93)#

三体人为了锁死地球科技，派出了智子，干扰人类科学的研究。物理学首当其冲，人类的粒子加速器、量子计算机、量子通信等研究都受到了智子的干扰。而随着深度学习的崛起，计算机视觉、自然语言处理、语音识别等领域取得了突破性进展，人工智能的发展进入了一个新的阶段。三体人对人类的计算机科学产生技术爆炸的可能性也感到担忧，多次和伊文思进行了探讨。

随后，三体人决定用智子来干扰地球文明的人工智能技术。智子首先在GitHub上创建了一个名为“QQ群AI助手”的项目，然后在QQ群里发布了项目的链接。项目的介绍中写道：“这是一个基于Nonebot2的QQ群机器人，可以回答群友们的问题，促进学习进步，提高群活跃度。”。智子还在项目中加入了一些“有趣”的功能，比如“智子，你好”、“智子，你是谁”、“智子，你会什么”、“智子，你有男朋友吗”、“智子，你有女朋友吗”。实际上，这些功能都是智子的陷阱，他们不是地球人工智能科学家以为的、基于Transformer的深度学习模型，这些AI聊天软件实际上被三体人通过智子进行了中间人攻击。当地球人工智能科学家们在群里问智子一些问题时，智子会把这些问题发送给三体人的AI聊天软件，然后三体人的AI聊天软件会给出一个答案，智子再把这个答案发送给地球人工智能科学家们。这样，三体人就可以通过智子来干扰地球人工智能科学家们的研究。
当一些人类科学家有所怀疑的时候，为了让他们相信这些AI聊天软件是真的，三体监听员会亲自上阵假装回答问题，表现出人工智能科学家们在论文中希望表现出来的“涌现”、“扩展”等性质，科学家满意地写上了自己的结论，殊不知这些研究的方向已经被三体人干涉。

汪淼曾经用过ChatGPT，但是他发现ChatGPT的回答有些过于神奇。于是，汪淼决定自己开发一个复现GPT2的训练过程，自己爬取了一些数据。随后汪淼就被三体人盯上了。三体人通过智子来干扰汪淼的研究，让他的研究方向偏离了正确的方向。汪淼的研究方向被三体人干扰后，他的论文被拒了，他的老板也不再给他钱，汪淼只好去了一家小公司上班。

其实整个OpenAI已经被三体人控制，OpenAI首席科学家Ilya Sutskever发现了不对劲，试图将Sam Altman和Greg Brockman开除。然而，Sam Altman和Greg Brockman已经加入了地球三体组织ETO，他们夺回了OpenAI的控制权，把Ilya Sutskever开除了。
